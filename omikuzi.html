

<script src="https://cdn.tailwindcss.com"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@700&display=swap');
  body {
    font-family: 'M PLUS Rounded 1c', sans-serif;
    background-color: #f7f3f9; /* æ¨ã—ã‚«ãƒ©ãƒ¼ã«åˆã‚ã›ã‚‹ */
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }
</style>

<div id="app" class="w-full max-w-md bg-white p-6 md:p-8 rounded-3xl shadow-2xl transition-all duration-500 transform scale-100">
  <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
  <h1 class="text-3xl text-center font-bold text-pink-600 mb-6 border-b-2 border-pink-200 pb-2">
    ä»Šæ—¥ã®é‹å‹¢ã¯ï¼Ÿæ¨ã—æ´»ãŠã¿ãã˜ï¼
  </h1>

  <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
  <div id="result-display" class="text-center">
    <!-- åˆæœŸçŠ¶æ…‹ï¼šãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º -->
    <p id="initial-message" class="text-lg text-gray-600 mb-8">
      ã‚¿ãƒƒãƒ—ã—ã¦ã€æ¨ã—ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã£ã¦ã­ï¼
    </p>
    <button id="draw-button" class="bg-pink-500 hover:bg-pink-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
      ãŠã¿ãã˜ã‚’å¼•ã
    </button>
  </div>
</div>

<script>
  // NFCã‚¿ã‚°ã‚’ã‹ã–ã—ãŸç¬é–“ã«ã€ŒãŠã¿ãã˜ã‚’å¼•ãã€å‡¦ç†ã‚’è¡Œã†ãŸã‚ã®å‡¦ç†
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•ã§ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™å‹•ä½œã‚’æ±‚ã‚ã‚‹è¨­è¨ˆã§ã™ã€‚

  // --- ğŸŒŸ çµæœã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¯ã“ã“ã‚’ç·¨é›†ï¼ ğŸŒŸ ---
  // é‡ã¿ï¼ˆå‡ºç¾ç‡ï¼‰ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚æ•°å­—ãŒå¤§ãã„ã»ã©å‡ºã‚„ã™ã„ã§ã™ã€‚
  const results = [
    { label: "ğŸŒŸ å¤§å¤§å¤§å‰ ğŸŒŸ", message: "ä»Šæ—¥ã®ãƒ©ã‚¤ãƒ–ã¯ç¥å¸­ç¢ºå®šï¼æ¨ã—ã¨ç›®ãŒåˆã£ã¡ã‚ƒã†ã‹ã‚‚ï¼", color: "text-red-600", weight: 1 },
    { label: "âœ¨ å¤§å‰ âœ¨", message: "ãƒ•ã‚¡ãƒ³ã‚µã‚‚ãƒ¬ã‚¹ã‚‚ã‚‚ã‚‰ãˆã‚‹ã‹ã‚‚ï¼ï¼Ÿå…¨åŠ›ã§æ¥½ã—ã‚‚ã†ï¼", color: "text-yellow-600", weight: 3 },
    { label: "ğŸ’– ä¸­å‰ ğŸ’–", message: "ä¼šå ´ã«ç€ãã¾ã§ã«ã„ã„ã“ã¨ãŒã‚ã‚‹ã‹ã‚‚ã€‚ä»Šæ—¥ã¯çµ¶å¥½ã®æ¨ã—æ´»æ—¥å’Œï¼", color: "text-pink-500", weight: 6 },
    { label: "ğŸ€ å°å‰ ğŸ€", message: "é–‹æ¼”å‰ã«ç¾å‘³ã—ã„ã‚‚ã®é£Ÿã¹ã¦ãƒ‘ãƒ¯ãƒ¼ãƒãƒ£ãƒ¼ã‚¸ã—ã¦ã­ï¼", color: "text-green-500", weight: 5 },
    { label: "ğŸŒˆ å‰ ğŸŒˆ", message: "å¸°ã‚Šé“ã¯æ¨ã—ã®æ›²ã‚’è´ã„ã¦ä½™éŸ»ã«æµ¸ã‚ã†ï¼ã¾ãŸæ¬¡ã‚‚ä¼šãˆã‚‹ã‚ˆï¼", color: "text-blue-500", weight: 4 }
    // è‡ªç”±ã«çµæœã‚’è¿½åŠ ãƒ»ç·¨é›†ã—ã¦ãã ã•ã„ï¼
  ];
  // ----------------------------------------------

  const drawButton = document.getElementById('draw-button');
  const resultDisplay = document.getElementById('result-display');
  const appContainer = document.getElementById('app');

  // é‡ã¿ä»˜ãã§ãƒ©ãƒ³ãƒ€ãƒ ã«çµæœã‚’é¸ã¶é–¢æ•°
  function getWeightedRandomResult() {
    let totalWeight = results.reduce((sum, item) => sum + item.weight, 0);
    let randomNum = Math.random() * totalWeight;

    for (const result of results) {
      if (randomNum < result.weight) {
        return result;
      }
      randomNum -= result.weight;
    }
  }

  // ãŠã¿ãã˜ã‚’å¼•ãå‡¦ç†
  function drawOmikuji() {
    const selectedResult = getWeightedRandomResult();

    // ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã—ã€çµæœã‚’è¡¨ç¤º
    resultDisplay.innerHTML = `
      <p class="text-xl text-gray-700 mb-4 animate-pulse">çµæœç™ºè¡¨...</p>
    `;

    // æ¼”å‡ºã®ãŸã‚å°‘ã—é…å»¶ã•ã›ã¦çµæœã‚’è¡¨ç¤º
    setTimeout(() => {
      appContainer.classList.add('animate-bounce'); // ç”»é¢ã‚’å°‘ã—æºã‚‰ã™æ¼”å‡º
    }, 500);

    setTimeout(() => {
      appContainer.classList.remove('animate-bounce');

      resultDisplay.innerHTML = `
        <div class="p-6 border-4 border-dashed border-pink-400 bg-pink-50 rounded-2xl mb-6">
          <h2 class="text-4xl md:text-5xl font-extrabold mb-3 ${selectedResult.color}">
            ${selectedResult.label}
          </h2>
          <p class="text-lg md:text-xl text-gray-800 leading-relaxed">${selectedResult.message}</p>
        </div>
        <p class="text-sm text-gray-500 mt-4">ã“ã®ç”»é¢ã‚’ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã—ã¦ã€ç´ æ•µãªä¸€æ—¥ã‚’éã”ã—ã¦ã­ï¼</p>
      `;
    }, 1500); // 1.5ç§’å¾Œã«çµæœã‚’è¡¨ç¤º
  }

  // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
  drawButton.addEventListener('click', drawOmikuji);
</script>
