<!-- 改良版：推し活NFCおみくじジェネレーター（画像対応＆スマホ最適化） -->
<script src="https://cdn.tailwindcss.com"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@700&family=Bebas+Neue&display=swap');
  :root {
    /* メインカラーを定義（例：ライブTシャツの色など） */
    --main-color: #ff3366; /* ポップなピンク */
    --accent-color: #ffe66d; /* アクセントの黄色 */
  }
  body {
    font-family: 'M PLUS Rounded 1c', sans-serif;
    background-color: var(--main-color);
    background-image: linear-gradient(135deg, var(--main-color) 0%, #ff6699 100%);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0;
    margin: 0;
    overflow-x: hidden;
  }
  .omikuji-card {
    background-color: #ffffff;
    max-width: 90vw; /* スマホ画面の90%幅 */
    min-height: 80vh; /* 画面を大きく使う */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border-radius: 2rem;
    padding: 1.5rem;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
  }
  .shaker {
      animation: shake 0.8s cubic-bezier(.36,.07,.19,.97) both;
      transform: translate3d(0, 0, 0);
  }
  @keyframes shake {
      10%, 90% { transform: translate3d(-1px, 0, 0); }
      20%, 80% { transform: translate3d(+2px, 0, 0); }
      30%, 70% { transform: translate3d(-4px, 0, 0); }
      40%, 60% { transform: translate3d(+4px, 0, 0); }
      50% { transform: translate3d(-4px, 0, 0); }
  }
</style>

<div id="app" class="omikuji-card w-full text-center">
  <!-- タイトル -->
  <h1 class="font-['Bebas_Neue'] text-5xl md:text-6xl text-gray-800 mb-4 tracking-wider leading-none">
    LIVE LUCK CHANCE
  </h1>
  <p class="text-xl text-gray-700 mb-8 font-bold border-b-2 border-gray-200 pb-2">
    推しとの運試し！おみくじを引こう！
  </p>

  <!-- 結果表示エリア -->
  <div id="result-display" class="w-full flex flex-col items-center justify-center flex-grow">
    <!-- 初期状態：ボタンを表示 -->
    <img id="placeholder-image" src="kanaboon_jackintour_2.png" onerror="this.src='https://placehold.co/200x200/ff6699/ffffff?text=PUSH'" class="w-48 h-48 rounded-full object-cover shadow-xl mb-10 border-4 border-gray-100 transition duration-500" alt="Placeholder image">
    
    <button id="draw-button" class="bg-[var(--main-color)] hover:bg-pink-700 text-white font-bold py-4 px-10 rounded-full shadow-2xl transition duration-300 transform hover:scale-105 text-2xl animate-pulse">
      おみくじを引く！
    </button>
  </div>
</div>

<script>
  // --- 🌟 結果のカスタマイズはここを編集！ 🌟 ---
  // 重み（出現率）を設定しています。数字が大きいほど出やすいです。
  const results = [
    { 
        label: "🌟 大大大吉 🌟", 
        message: "今日のファンサは確定！推しと目が合っちゃうかも！最高のライブを楽しんで！", 
        color: "text-red-600", 
        weight: 1, 
        image: "[大大大吉の画像URLをここに貼り付け]" // 推しの最高の笑顔など
    },
    { 
        label: "✨ 大吉 ✨", 
        message: "会場に着くまでにいいことがあるかも。今日は絶好の推し活日和！", 
        color: "text-yellow-600", 
        weight: 3, 
        image: "[大吉の画像URLをここに貼り付け]" // ポジティブなイラストなど
    },
    { 
        label: "💖 中吉 💖", 
        message: "今日の思い出は一生モノ！最高のパフォーマンスを焼き付けよう！", 
        color: "text-pink-500", 
        weight: 6, 
        image: "[中吉の画像URLをここに貼り付け]" // ライブロゴなど
    },
    { 
        label: "🍀 吉 🍀", 
        message: "開演前に美味しいもの食べてパワーチャージしてね！素敵な出会いがあるかも。", 
        color: "text-green-500", 
        weight: 5, 
        image: "[吉の画像URLをここに貼り付け]" // メンバーカラーのイラストなど
    }
  ];
  // ----------------------------------------------

  const drawButton = document.getElementById('draw-button');
  const resultDisplay = document.getElementById('result-display');
  const appContainer = document.getElementById('app');

  // 重み付きでランダムに結果を選ぶ関数
  function getWeightedRandomResult() {
    let totalWeight = results.reduce((sum, item) => sum + item.weight, 0);
    let randomNum = Math.random() * totalWeight;

    for (const result of results) {
      if (randomNum < result.weight) {
        return result;
      }
      randomNum -= result.weight;
    }
  }

  // おみくじを引く処理
  function drawOmikuji() {
    // ボタン連打防止
    drawButton.disabled = true;

    // シャッフル演出
    appContainer.classList.add('shaker');
    resultDisplay.innerHTML = `
      <div class="flex flex-col items-center justify-center p-6 bg-white rounded-3xl">
        <svg class="animate-spin h-10 w-10 text-[var(--main-color)] mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <p class="text-xl font-bold text-gray-800">運命のメッセージを準備中...</p>
      </div>
    `;


    // 演出時間後に結果を表示
    setTimeout(() => {
      appContainer.classList.remove('shaker');
      const selectedResult = getWeightedRandomResult();

      resultDisplay.innerHTML = `
        <div class="flex flex-col items-center p-4 w-full">
          <img src="${selectedResult.image || 'https://placehold.co/200x200/ff3366/ffffff?text=LUCK'}" 
               onerror="this.src='https://placehold.co/200x200/ff3366/ffffff?text=LUCK'"
               class="w-56 h-56 md:w-64 md:h-64 rounded-full object-cover shadow-2xl mb-6 border-4 border-[var(--accent-color)] transform rotate-2 transition duration-500 hover:rotate-0" 
               alt="Omikuji Result Image">
          
          <div class="w-full p-4 md:p-6 bg-[var(--accent-color)] border-4 border-[var(--main-color)] rounded-xl shadow-inner transform -rotate-1 transition duration-500 hover:rotate-0">
            <h2 class="text-4xl font-extrabold mb-2 text-gray-900 leading-tight">
              ${selectedResult.label}
            </h2>
            <p class="text-lg md:text-xl text-gray-800 leading-relaxed font-semibold">
              ${selectedResult.message}
            </p>
          </div>
        </div>
        <p class="text-sm text-gray-600 mt-4">
            この画面をスクショして推し活の思い出にしてね！
        </p>
      `;
    }, 2000); // 2秒後に結果を表示
  }

  // イベントリスナーを設定
  document.addEventListener('DOMContentLoaded', () => {
    const drawButtonElement = document.getElementById('draw-button');
    if (drawButtonElement) {
        drawButtonElement.addEventListener('click', drawOmikuji);
    }
  });
</script>
